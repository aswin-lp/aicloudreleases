<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task View & Code Release</title>
    <!-- Bootstrap CSS CDN -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

    <style>
        /* Your existing CSS styles */
         body {
            font-family: Arial, sans-serif;
            padding-top: 50px;
            background-color: #f7f7f7;
            color: #470f4a;
        }
        h1 {
            text-align: center;
            font-size: 50px;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: bold;
        }
        h2 {
            font-size: 20px;
            margin-bottom: 10px;
            text-transform: uppercase;
            font-weight: bold;
            text-decoration: underline;
        }
        .task-table th,
        .task-table td {
            overflow: hidden;
            word-wrap: break-word;
        }
        .notice-board {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            padding: 20px;
            margin-bottom: 20px;
        }
        .download-link {
            display: block;
            margin-top: 10px;
        }
        /* Custom styles for the headings */
        .heading-center {
            text-align: center;
            margin-bottom: 30px;
        }
        .release-box {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 20px;
        }
        .btn-custom {
            background-color: #470f4a;
            color: #ffffff;
            border-radius: 5px;
            text-transform: uppercase;
            font-weight: bold;
            font-size: 1.2rem;
            padding: 10px 20px;
            margin-top: 20px;
            border: none;
        }
        .btn-custom:hover {
            background-color: #5d1478; /* Darker shade of the primary color on hover */
        }
        .aicloud-heading {
            text-align: center;
            margin-bottom: 20px;
            font-weight: bold;
            font-size: 36px;
            color: #470f4a;
            text-decoration: underline;
        }
       
    </style>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-lg-12 ">
               <br><center><img src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjcwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2MzggMTA3LjUxIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzQ3MGY0YTtmaWxsLXJ1bGU6ZXZlbm9kZDt9PC9zdHlsZT48L2RlZnM+PGcgaWQ9IkxheWVyXzIiIGRhdGEtbmFtZT0iTGF5ZXIgMiI+PGcgaWQ9IkxheWVyXzEtMiIgZGF0YS1uYW1lPSJMYXllciAxIj48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik01ODQuMjUsMEE1My43Niw1My43NiwwLDAsMSw2MzgsNTMuNzVsLTUzLjc1LDUzLjc2QTUzLjc2LDUzLjc2LDAsMCwwLDYzOCw1My43NUw1ODQuMjUsMFpNNTY3Ljc4LDEwNC45M0E1My45Myw1My45MywwLDAsMSw1MzcuNDQsODAuMmg1NS4wN2wtMjQuNzMsMjQuNzNaTTUzMi4xNyw2Ny4xMmE1NCw1NCwwLDAsMSwwLTI2LjczaDczLjQyTDYxOSw1My43NSw2MDUuNTksNjcuMTJabTUuMjctMzkuODJBNTQsNTQsMCwwLDEsNTY3Ljc4LDIuNTdMNTkyLjUxLDI3LjNaIi8+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNNDQuMTMsNzkuODJWNjYuNDdIMTQuNzlWMTYuMDhIMFY3OS44MlptNjMtMjUuNjVWNTRhMjUuNzQsMjUuNzQsMCwwLDAtMi4xMS0xMC40MiwyNi40MywyNi40MywwLDAsMC01LjgxLTguNDYsMjcsMjcsMCwwLDAtOC43OS01LjY2LDMwLjUsMzAuNSwwLDAsMC0yMi4xOSwwLDI3Ljc4LDI3Ljc4LDAsMCwwLTguODQsNS43NywyNi40MywyNi40MywwLDAsMC01Ljg2LDguNSwyNS43OCwyNS43OCwwLDAsMC0yLjExLDEwLjQydi4xOWEyNS43NCwyNS43NCwwLDAsMCwyLjExLDEwLjQyLDI2LjQzLDI2LjQzLDAsMCwwLDUuODEsOC40NiwyNywyNywwLDAsMCw4Ljc5LDUuNjYsMjkuMDksMjkuMDksMCwwLDAsMTEsMi4wNywyOC43NSwyOC43NSwwLDAsMCwxMS4xNC0yLjExLDI3LjY3LDI3LjY3LDAsMCwwLDguODQtNS43NywyNi40MywyNi40MywwLDAsMCw1Ljg2LTguNSwyNS43OCwyNS43OCwwLDAsMCwyLjExLTEwLjQyWm0tMTQuNDEuMTlhMTYsMTYsMCwwLDEtLjkxLDUuNDMsMTMuMzYsMTMuMzYsMCwwLDEtMi42NCw0LjQ3LDEyLjMzLDEyLjMzLDAsMCwxLTQuMTgsMywxMy40OSwxMy40OSwwLDAsMS01LjYyLDEuMTEsMTIuNzcsMTIuNzcsMCwwLDEtNS41Mi0xLjE2LDEzLjcyLDEzLjcyLDAsMCwxLTcuMDYtNy42MywxNS4yOCwxNS4yOCwwLDAsMS0xLTUuNDNWNTRhMTYsMTYsMCwwLDEsLjkxLTUuNDMsMTMuNDYsMTMuNDYsMCwwLDEsMi42NC00LjQ3LDEyLjMzLDEyLjMzLDAsMCwxLDQuMTgtM0ExMy40OSwxMy40OSwwLDAsMSw3OS4yMiw0MGExMi45MSwxMi45MSwwLDAsMSw1LjQ4LDEuMTZBMTMuNTksMTMuNTksMCwwLDEsODksNDQuMjNhMTMuNzksMTMuNzksMCwwLDEsMi43OCw0LjUxLDE1LjI4LDE1LjI4LDAsMCwxLDEsNS40M3YuMTlabTc4Ljc5LDEzLjgzVjI3LjU4SDE1N3Y3LjQ4YTM4LjM2LDM4LjM2LDAsMCwwLTcuODktNi41NGMtMTQuOC04LjUxLTMzLDUuNTYtMzMsMjIuODZ2LjJjMCwxMy41Miw5LjcxLDI0LDIzLjU1LDI0LDcuMzksMCwxMi45MS0yLjc1LDE3LjU2LTguMzZ2Mi41YzAsOS43MS01LjIzLDE1LjQ2LTE0LjcsMTUuNDYtNi41MywwLTExLjY5LTIuMDktMTcuMzgtNS4ybC01LDExYTQ5LjE1LDQ5LjE1LDAsMCwwLDIyLjc3LDUuODdjMTksMCwyOC43Mi05LDI4LjcyLTI4LjYyWm0tMTUtMTYuNjFjMCw3LjEyLTUuNzEsMTEuOTEtMTIuNzcsMTEuOTFzLTEzLjE4LTQuNjEtMTMuMTgtMTEuOTF2LS4yYTEzLDEzLDAsMCwxLDEyLjg2LTEzLDEzLjE3LDEzLjE3LDAsMCwxLDEzLjA5LDEzdi4yWm00Mi4zNCwyOC4yNFYyNy41OGgtMTQuNlY3OS44MlpNMjU5LDcxLjU2bC04LjU1LTguNjVhMTkuNTIsMTkuNTIsMCwwLDEtMTMuMDYsNS40OEMyMjkuMyw2OC4zOSwyMjQsNjEsMjI0LDUzLjN2LS4yYzAtNy4yNCw1LjE3LTE0LjQsMTIuODYtMTQuNGExNy42NywxNy42NywwLDAsMSwxMyw1LjY3bDguOTMtOS42Yy01LjY5LTYuMjktMTMuNDEtOC42NS0yMS44LTguNjVBMjcuMDUsMjcuMDUsMCwwLDAsMjA5LjU3LDUzLjN2LjE5QTI3LjQxLDI3LjQxLDAsMCwwLDIzNi43NSw4MUMyNDUuNjYsODEsMjUzLjA2LDc4LjEzLDI1OSw3MS41NloiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik0zMjYuMzksMzkuMzlWMzkuMmEyNC40OSwyNC40OSwwLDAsMC0xLjc3LTkuNDYsMjEsMjEsMCwwLDAtNS4wOS03LjM1LDIyLjkzLDIyLjkzLDAsMCwwLTguMDctNC43NkEzMi4zNywzMi4zNywwLDAsMCwzMDAuNjUsMTZIMjY5LjE4Vjc5LjgySDI4NFY2M2gxNS4yNGEzNi42NywzNi42NywwLDAsMCwxMC42MS0xLjQ5LDI1LjEyLDI1LjEyLDAsMCwwLDguNjUtNC40NywyMSwyMSwwLDAsMCw1LjgxLTcuMzksMjMuNTYsMjMuNTYsMCwwLDAsMi4xMS0xMC4yOFptLTE1LC4yOWE5LjYxLDkuNjEsMCwwLDEtMy4wOCw3LjI1Yy0yLDItNC45MywyLjkzLTguNjQsMi45M0gyODRWMjkuMzFIMjk5LjRxNS41OCwwLDguNzksMi41OXQzLjIyLDcuNTl2LjE5Wm0zOC40Myw0MC4xNFYxNC43aC0xNC42Vjc5LjgyWm02My4yOCwwVjI3LjUyaC0xNC42VjU3YzAsNi00LDExLjcyLTEwLjQxLDExLjcyLTcuNjMsMC0xMC41NS01Ljg0LTEwLjU1LTExLjcyVjI3LjUySDM2M1Y2MS42NmMwLDExLjIzLDguNjksMTkuMTIsMjAuNDgsMTkuMTIsNi42MywwLDExLjIxLTMuMiwxNS4wOC04LjMzdjcuMzdabTk1LjUyLDBWNDYuMjljMC0xMS4zNS04LjMzLTIwLjA4LTIwLjIzLTIwLjA4LTcsMC0xMi4zLDQtMTYuNzUsOS4zOS0yLjg5LTUuNzItMTAtOS4zOS0xNi4yMS05LjM5LTYuNywwLTExLjEyLDIuNDItMTQuNzgsNy44NlYyNy41MmgtMTQuNnY1Mi4zaDE0LjZWNTEuMTZjMC01LjgyLDEuODktMTIuMTksOS43MS0xMi4xOXM5LjU1LDYuNDYsOS41NSwxMi4xOVY3OS44MmgxNC42VjUxLjE2YzAtNS44MiwyLjI3LTEyLjE5LDEwLTEyLjE5UzQ5NCw0NS40Myw0OTQsNTEuMTZWNzkuODJaIi8+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNMTkxLjYyLDE5YTguNjgsOC42OCwwLDEsMC04LjY4LTguNjhBOC43LDguNywwLDAsMCwxOTEuNjIsMTlaIi8+PC9nPjwvZz48L3N2Zz4='/></center>
               <br>
                <h1>AICLOUD 4.0</h1>
                <br>
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 text-center">
                <h2>AICloud Releases</h2><br>
              
                <div class="release-box" id="newReleaseBoard">
                    <!-- New release notice board will be populated dynamically -->
                </div>
                <div class="col-lg-12">
                    <div class="release-box" id="previousReleases">
                        <h2>Previous Releases</h2><br>
                        <div id="previousReleasesList">
                            <!-- Table for previous releases will be populated dynamically -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 text-center">
                <h2>Tasks Status</h2><br>
                <div class="table-responsive">
                    <table class="table table-bordered task-table" id="taskTable">
                        <thead>
                            <tr>
                                <th>Task</th>
                                <th>Status</th>
                                <th>Expected Date</th>
                                <!-- Add more columns as needed -->
                            </tr>
                        </thead>
                        <tbody id="taskTableBody">
                            <!-- Table body will be populated dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS and jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <!-- Your JavaScript code here -->
    <script>
        const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSzyxxd4HYNiAfHNdx40BVmp-Z9j8kSUDJFv09aXSHE3oL-4wa4UsXGRtwA599q36C7kR7zG8HhXfqN/pub?output=csv'; // Replace with your Google Sheets CSV link

        fetch(csvUrl)
        .then(response => response.text())
        .then(csvData => {
            const parsedData = Papa.parse(csvData, { header: true, dynamicTyping: true });
            console.log(parsedData); // Log parsed data to check if CSV is properly parsed
            displayTaskStatus(parsedData.data);
            displayNewRelease(parsedData.data); // Display the new release by comparing dates
            displayPreviousReleases(parsedData.data); // Display previous releases
        })
        .catch(error => console.error('Error fetching data:', error));


        function displayTaskStatus(data) {
            const taskTableBody = document.getElementById('taskTableBody');
            taskTableBody.innerHTML = '';

            data.forEach(row => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${row['Task']}</td>
                    <td>${row['Status']}</td>
                    <td>${row['Expected Date']}</td>
                    <!-- Add more columns as needed -->
                `;
                taskTableBody.appendChild(tr);
            });
        }

        function displayNewRelease(data) {
            const sortedData = data.sort((a, b) => {
                // Assuming 'Release Date' is in the format 'MM/DD/YYYY'
                const dateA = new Date(a['Release Date']);
                const dateB = new Date(b['Release Date']);
                return dateB - dateA; // Sorts dates in descending order
            });

            const latestRelease = sortedData.length > 0 ? sortedData[0] : null;

            const newReleaseBoard = document.getElementById('newReleaseBoard');
            if (latestRelease) {
                newReleaseBoard.innerHTML = `
                    <div class="release-box">
                        <h2>New Release</h2><br>
                        <p>Date: ${latestRelease['Release Date']}</p>
                        <p>Description: ${latestRelease['Code Updates']}</p>
                        <a href="${latestRelease['Link']}" class="btn-custom" download-link" download>Download New Release</a>
                    </div>
                `;
            } else {
                newReleaseBoard.innerHTML = `
                    <div class="release-box">
                        <h2>New Release</h2><br>
                        <p>No new release available</p>
                    </div>
                `;
            }
        }


        function displayPreviousReleases(data) {
            const previousReleasesList = document.getElementById('previousReleasesList');

            if (!previousReleasesList) {
                console.error("Previous Releases list element not found!");
                return;
            }

            const sortedData = data.sort((a, b) => {
                // Assuming 'Release Date' is in the format 'MM/DD/YYYY'
                const dateA = new Date(a['Release Date']);
                const dateB = new Date(b['Release Date']);
                return dateB - dateA; // Sorts dates in descending order
            });

            const table = document.createElement('table');
            table.classList.add('table', 'table-bordered');

            const thead = document.createElement('thead');
            const headRow = document.createElement('tr');
            headRow.innerHTML = `<th>Date</th><th>Code Updates</th><th>Download</th>`;
            thead.appendChild(headRow);
            table.appendChild(thead);

            const tbody = document.createElement('tbody');
            for (let i = 1; i < sortedData.length; i++) { // Start from the second release
                const release = sortedData[i];
                const releaseDates = release['Release Date'] ? release['Release Date'].split(';').map(date => date.trim()).filter(Boolean) : [];
                releaseDates.forEach(date => {
                    if (date && release['Code Updates'] && release['Link']) {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${date}</td>
                            <td>${release['Code Updates']}</td>
                            <td><a href="${release['Link']}" class="btn-custom" download><i class="fas fa-download"></i></a></td>
                        `;
                        tbody.appendChild(row);
                    }
                });
            }

            table.appendChild(tbody);
            previousReleasesList.innerHTML = ''; // Clear the content before appending
            previousReleasesList.appendChild(table);
        }

    </script>
</body>
</html>
